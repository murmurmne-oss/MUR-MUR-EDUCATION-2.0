# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üéØ Workflow

```
–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí Git commit ‚Üí –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```

## üìã –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
npm install

# –ò–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ
cd apps/backend && npm install
cd apps/admin && npm install
cd apps/miniapp && npm install
```

### 1.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Backend** (`apps/backend/.env`):
```env
DATABASE_URL="postgresql://admin:Erufur22@ys47763-002.eu.clouddb.ovh.net:35766/murmured"
API_KEY="–≤–∞—à_api_key"
TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
# ... –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ production .env
```

**Admin** (`apps/admin/.env.local`):
```env
NEXT_PUBLIC_API_BASE_URL="http://localhost:4000"
API_KEY="–≤–∞—à_api_key"
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="–≤–∞—à_–ø–∞—Ä–æ–ª—å"
```

**Miniapp** (`apps/miniapp/.env.local`):
```env
NEXT_PUBLIC_API_BASE_URL="http://localhost:4000"
NEXT_PUBLIC_TELEGRAM_STARS_PER_EURO=60
```

### 1.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
cd apps/backend

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:migrate

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ Prisma Client
npm run db:generate
```

## üöÄ –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç A: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (Turbo)

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
npm run dev
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- Backend –Ω–∞ `http://localhost:4000`
- Admin –Ω–∞ `http://localhost:3000`
- Miniapp –Ω–∞ `http://localhost:3001` (–∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç)

### –í–∞—Ä–∏–∞–Ω—Ç B: –ó–∞–ø—É—Å–∫ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏

**Backend:**
```bash
cd apps/backend
npm run start:dev
# –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:4000
```

**Admin:**
```bash
cd apps/admin
npm run dev
# –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000
```

**Miniapp:**
```bash
cd apps/miniapp
npm run dev
# –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3001
```

## üß™ –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - Admin: `http://localhost:3000`
   - Miniapp: `http://localhost:3001`
   - Backend API: `http://localhost:4000`

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   - –°–æ–∑–¥–∞–π—Ç–µ/–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫—É—Ä—Å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API endpoints

## üì§ –®–∞–≥ 4: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 4.1 –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git status

# –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã
git add .

# –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ
git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ó–∞–ø—É—à—å—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git push origin main
```

### 4.2 –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

```bash
cd /opt/murmur/deploy

# –ü–æ–ª—É—á–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose -f docker-compose.prod.yml build --no-cache
docker compose -f docker-compose.prod.yml up -d

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
./deploy-production.sh
```

### 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose -f docker-compose.prod.yml ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose -f docker-compose.prod.yml logs --tail=50

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl -I https://admin.murmurmne.com
curl -I https://api.murmurmne.com
```

## üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# 1. –õ–æ–∫–∞–ª—å–Ω–æ: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# 2. –õ–æ–∫–∞–ª—å–Ω–æ: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

# 3. Git: –∫–æ–º–º–∏—Ç –∏ –ø—É—à
git add .
git commit -m "feat: –Ω–æ–≤–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"
git push origin main

# 4. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –¥–µ–ø–ª–æ–π
ssh user@server
cd /opt/murmur/deploy
git pull origin main
docker compose -f docker-compose.prod.yml build --no-cache
docker compose -f docker-compose.prod.yml up -d

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ production
# –û—Ç–∫—Ä–æ–π—Ç–µ https://admin.murmurmne.com
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –õ–æ–∫–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production –ë–î (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
   - –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é PostgreSQL –ë–î

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª—ã –≤ git
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω

3. **–ú–∏–≥—Ä–∞—Ü–∏–∏:**
   - –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ: `npm run db:migrate`
   - –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ production –Ω–µ —Å–ª–æ–º–∞–ª—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev              # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run build            # –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run lint             # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥

# Backend
cd apps/backend
npm run start:dev        # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run db:migrate       # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:generate      # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client

# Frontend
cd apps/admin
npm run dev              # –ó–∞–ø—É—Å–∫ Next.js dev server
npm run build            # –°–±–æ—Ä–∫–∞ –¥–ª—è production

# –î–µ–ø–ª–æ–π
cd deploy
./deploy-production.sh   # –î–µ–ø–ª–æ–π –Ω–∞ production (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –µ—Å—Ç—å)
```

## üìù –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

1. **–õ–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
   # –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
   npm run dev
   ```

2. **Git:**
   ```bash
   git add .
   git commit -m "feat: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"
   git push origin main
   ```

3. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   cd /opt/murmur/deploy
   git pull origin main
   docker compose -f docker-compose.prod.yml build --no-cache
   docker compose -f docker-compose.prod.yml up -d
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ production —Å–∞–π—Ç
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –î–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º)

